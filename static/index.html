<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" name="viewport" />

    <link rel="stylesheet" href="node_modules/xterm/dist/xterm.css" />
    <script src="node_modules/xterm/dist/xterm.js"></script>
    <script src="clarity-wasm.js"></script>
</head>

<body>
    <div id="terminal"></div>
    <script>

        var term = new Terminal();
        term.open(document.getElementById('terminal'));

        Module.print = function(text) {
            term.writeln(`stdout: ${text}`);
            console.log(`stdout: ${text}`);
        };
        Module.printErr = function(text) {
            term.writeln(`stderr: ${text}`);
            console.error(`stderr: ${text}`);
        };
        Module.onRuntimeInitialized = function () {
            const echoTest = Module.cwrap('echo_test', 'string', [])();
            console.log('echo test: ' + echoTest);
            term.writeln('Invoking clarity runtime fn...');
            term.writeln(`"${echoTest}"`);
            term.write('\x1B[1;3;31mClarity CLI\x1B[0m $ ');
        };

    </script>
</body>

</body>

</html>